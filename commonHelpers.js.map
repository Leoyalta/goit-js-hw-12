{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getDataFromAPI(\n  BASE_URL,\n  API_KEY,\n  inputValue,\n  page,\n  limitPageContent\n) {\n  const fullUrl = constructUrl(\n    BASE_URL,\n    API_KEY,\n    inputValue,\n    page,\n    limitPageContent\n  );\n  try {\n    const { data } = await axios.get(fullUrl);\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\nfunction constructUrl(BASE_URL, API_KEY, inputValue, page, limitPageContent) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: limitPageContent,\n  });\n  return `${BASE_URL}?${searchParams}`;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGalleryImg(parentEl, data) {\n  parentEl.insertAdjacentHTML('beforeend', generateGalleryMarkup(data));\n  lightbox.refresh();\n}\n\nfunction generateGalleryMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        ` <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <figure class=\"gallery-figure\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n          <figcaption class=\"gallery-figcaption\">\n            <ul class=\"gallery-text\">\n              <li>\n                <span>Likes</span>\n                <p>${likes}</p>\n              </li>\n              <li>\n                <span>Views</span>\n                <p>${views}</p>\n              </li>\n              <li>\n                <span>Comments</span>\n                <p>${comments}</p>\n              </li>\n              <li>\n                <span>Downloads</span>\n                <p>${downloads}</p>\n              </li>\n            </ul>\n          </figcaption>\n        </figure>\n      </a>\n    </li>`\n    )\n    .join(' ');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getDataFromAPI } from './js/pixabay-api';\nimport { renderGalleryImg } from './js/render-function';\n\n// const API_KEY = import.meta.env.VITE_API_KEY;\n// const BASE_URL = import.meta.env.VITE_BASE_URL;\n\nconst API_KEY = '44022963-dc7d5638f3e5caf2e9b20745b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\nconst btnLoadMore = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet limitPageContent = 15;\nlet currentSearchQuery = null;\nlet totalContent = null;\nlet totalPages = null;\n\nsearchForm.addEventListener('submit', onSubmitForm);\nbtnLoadMore.addEventListener('click', onLoadMoreButtonClick);\n\nasync function onSubmitForm(event) {\n    event.preventDefault();\n    galleryEl.innerHTML = '';\n    btnLoadMore.classList.add('is-hidden');\n    currentPage = 1;\n\n    const inputSearchValue = event.currentTarget.search.value.trim();\n\n    if (!inputSearchValue) {\n        displayErrorMessage('Please enter a value in the field!', 'Error');\n        event.currentTarget.reset();\n        return;\n    }\n\n    loaderWrapper.classList.remove('is-hidden');\n    await fetchData(BASE_URL, API_KEY, inputSearchValue, currentPage, limitPageContent);\n    \n}\n\nasync function fetchData(BASE_URL, API_KEY, inputSearchValue, page, limitPageContent) {\n    try {\n        const data = await getDataFromAPI(BASE_URL, API_KEY, inputSearchValue, page, limitPageContent);\n        const formData = data.hits;\n\n        if (formData.length === 0) {\n            displayErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n            return;\n        }\n\n        currentSearchQuery = inputSearchValue;\n        totalContent = data.totalHits;\n        totalPages = Math.ceil(totalContent / limitPageContent);\n\n        renderGalleryImg(galleryEl, formData);\n\n        if (currentPage >= totalPages) {\n            btnLoadMore.classList.add('is-hidden');\n        } else {\n            btnLoadMore.classList.remove('is-hidden');\n        }\n\n        smoothScroll();\n    } catch (error) {\n        displayErrorMessage('Error fetching data. Please try again later', 'Error');\n        console.error('Error fetching data:', error);\n    } finally {\n        loaderWrapper.classList.add('is-hidden');\n    }\n}\n\nasync function onLoadMoreButtonClick() {\n    currentPage++;\n\n    loaderWrapper.classList.remove('is-hidden');\n\n    await fetchData(BASE_URL, API_KEY, currentSearchQuery, currentPage, limitPageContent);\n\n    smoothScroll();\n\n    if (currentPage === totalPages) {\n        btnLoadMore.classList.add('is-hidden');\n        displayErrorMessage(`We're sorry, but you've reached the end of search results.`, '', '#EF4040');\n    }\n}\n\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    const galleryItemHeight = galleryItem ? galleryItem.getBoundingClientRect().height : 0;\n\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nconst iziToastConfig = {\n    position: 'topRight',\n    titleColor: '#FFF',\n    titleSize: '16',\n    titleLineHeight: '24',\n    messageColor: '#FFF',\n    messageSize: '16',\n    messageLineHeight: '24',\n};\n\nfunction displayErrorMessage(message, title, color = '#EF4040') {\n    iziToast.error({\n        ...iziToastConfig,\n        title: title || '',\n        message: `${message}`,\n        backgroundColor: color\n    });\n}"],"names":["getDataFromAPI","BASE_URL","API_KEY","inputValue","page","limitPageContent","fullUrl","constructUrl","data","axios","error","searchParams","renderGalleryImg","parentEl","generateGalleryMarkup","lightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","galleryEl","loaderWrapper","btnLoadMore","currentPage","currentSearchQuery","totalContent","totalPages","onSubmitForm","onLoadMoreButtonClick","event","inputSearchValue","displayErrorMessage","fetchData","formData","smoothScroll","galleryItem","galleryItemHeight","iziToastConfig","message","title","color","iziToast"],"mappings":"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"}